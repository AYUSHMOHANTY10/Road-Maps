(function(u,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(u=typeof globalThis<"u"?globalThis:u||self,m(u["roadmap-renderer"]={}))})(this,function(u){"use strict";function m(o){return(o||"").replace(/^\d+-/,"")}function b(o){let e=o>>16&255,t=o>>8&255,r=o&255;return`rgb(${e},${t},${r})`}function l(o,e={},t){let r=document.createElementNS("http://www.w3.org/2000/svg",o);for(let a in e)!e.hasOwnProperty(a)||r.setAttribute(a,e[a]);return t&&t.appendChild(r),r}const c=2.7,R=4,C=2,w={black:["#000"],gray:["#000","#333","#666","#999","#ccc","#ddd","#eee"],white:["#fff"],red:["#cf2a27","#ea9999","#eo6666","#cc0000","#990000","#660000"],orange:["#ff9900","#f9cb9c","#f6b26b","#e69138","#b45f06","#783f04"],yellow:["#ffff00","#ffe599","#ffd966","#f1c232","#bf9000","#7f6000"],green:["#009e0f","#b6d7a8","#93c47d","#6aa84f","#38761d","#274e13"],cyan:["#00ffff","#a2c4c9","#76a5af","#45818e","#134f5c","#0c343d"],blue:["#2b78e4","#9fc5f8","#6fa8dc","#597eaa","#085394","#073763"],purple:["#9900ff","#b4a7d6","#8e7cc3","#674ea7","#351c75","#20124d"],pink:["#ff00ff","#d5a6bd","#c27ba0","#a64d79","#741b47","#4c1130"]};class T{constructor(e,t){this.svgRoot=e,this.fontFamily=t,this.canvasRenderingContext2D=document.createElement("canvas").getContext("2d")}render(e,t){let r=e.typeID;r in this?this[r](e,t):console.log(`'${r}' control type not implemented`)}parseColor(e,t){return e===void 0?`rgb(${t})`:b(e)}parseFontProperties(e){var t,r,a;return{style:(t=e.properties)!=null&&t.italic?"italic":"normal",weight:(r=e.properties)!=null&&r.bold?"bold":"normal",size:(a=e.properties)!=null&&a.size?e.properties.size+"px":"13px",family:this.fontFamily}}measureText(e,t){return this.canvasRenderingContext2D.font=t,this.canvasRenderingContext2D.measureText(e)}drawRectangle(e,t){var r,a,s,n,p,i;l("rect",{x:parseInt(e.x)+c/2,y:parseInt(e.y)+c/2,width:parseInt((r=e.w)!=null?r:e.measuredW)-c,height:parseInt((a=e.h)!=null?a:e.measuredH)-c,rx:C,fill:this.parseColor((s=e.properties)==null?void 0:s.color,"255,255,255"),"fill-opacity":(p=(n=e.properties)==null?void 0:n.backgroundAlpha)!=null?p:1,stroke:this.parseColor((i=e.properties)==null?void 0:i.borderColor,"0,0,0"),"stroke-width":c},t)}addText(e,t,r,a){var k,I;let s=(k=e.properties.text)!=null?k:"",n=parseInt(e.x),p=parseInt(e.y),i=this.parseFontProperties(e),d=this.measureText(s,`${i.style} ${i.weight} ${i.size} ${i.family}`),x=a==="center"?n+((I=e.w)!=null?I:e.measuredW)/2-d.width/2:n,g=p+e.measuredH/2+d.actualBoundingBoxAscent/2,h=l("text",{x,y:g,fill:r,"font-style":i.style,"font-weight":i.weight,"font-size":i.size},t);if(!s.includes("{color:")){let y=l("tspan",{},h);y.textContent=s;return}s.split(/{color:|{color}/).forEach(y=>{if(y.includes("}")){let[f,D]=y.split("}");if(!f.startsWith("#")){let $=parseInt(f.slice(-1));f=isNaN($)?w[f][0]:w[f][$]}let S=l("tspan",{fill:f},h);S.textContent=D}else{let f=l("tspan",{},h);f.textContent=y}})}TextArea(e,t){this.drawRectangle(e,t)}Canvas(e,t){this.drawRectangle(e,t)}Label(e,t){var r;this.addText(e,t,this.parseColor((r=e.properties)==null?void 0:r.color,"0,0,0"),"left")}TextInput(e,t){var r;this.drawRectangle(e,t),this.addText(e,t,this.parseColor((r=e.properties)==null?void 0:r.textColor,"0,0,0"),"center")}Arrow(e,t){var x,g,h;let r=parseInt(e.x),a=parseInt(e.y),{p0:s,p1:n,p2:p}=e.properties,i;((x=e.properties)==null?void 0:x.stroke)==="dotted"?i="0.8 12":((g=e.properties)==null?void 0:g.stroke)==="dashed"&&(i="28 46");let d={x:(p.x-s.x)*n.x,y:(p.y-s.y)*n.x};l("path",{d:`M${r+s.x} ${a+s.y}Q${r+s.x+d.x+d.y*n.y*3.6} ${a+s.y+d.y+-d.x*n.y*3.6} ${r+p.x} ${a+p.y}`,fill:"none",stroke:this.parseColor((h=e.properties)==null?void 0:h.color,"0,0,0"),"stroke-width":R,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":i},t)}Icon(e,t){var n;let r=parseInt(e.x),a=parseInt(e.y),s=10;l("circle",{cx:r+s,cy:a+s,r:s,fill:this.parseColor((n=e.properties)==null?void 0:n.color,"0,0,0")},t),e.properties.icon.ID==="check-circle"&&l("path",{d:`M${r+4.5} ${a+s}L${r+8.5} ${a+s+4} ${r+15} ${a+s-2.5}`,fill:"none",stroke:"#fff","stroke-width":3.5,"stroke-linecap":"round","stroke-linejoin":"round"},t)}HRule(e,t){var n,p,i,d;let r=parseInt(e.x),a=parseInt(e.y),s;((n=e.properties)==null?void 0:n.stroke)==="dotted"?s="0.8, 8":((p=e.properties)==null?void 0:p.stroke)==="dashed"&&(s="18, 30"),l("path",{d:`M${r} ${a}L${r+parseInt((i=e.w)!=null?i:e.measuredW)} ${a}`,fill:"none",stroke:this.parseColor((d=e.properties)==null?void 0:d.color,"0,0,0"),"stroke-width":c,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":s},t)}__group__(e,t){var p;const r=(p=e==null?void 0:e.properties)==null?void 0:p.controlName,a=m(r),s=localStorage.getItem(a)==="done";let n=l("g",{...r?{class:`clickable-group ${s?"done":""}`,"data-group-id":r}:{}},t);e.children.controls.control.sort((i,d)=>i.zOrder-d.zOrder).forEach(i=>{i.x=parseInt(i.x,10)+parseInt(e.x,10),i.y=parseInt(i.y,10)+parseInt(e.y,10),this.render(i,n)})}}async function v(o,e={}){if(e={padding:5,fontFamily:"balsamiq",fontURL:"https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2",...e},e.fontURL){let d=new FontFace(e.fontFamily,`url(${e.fontURL})`);await d.load(),document.fonts.add&&document.fonts.add(d)}let t=o.mockup,r=t.measuredW-t.mockupW-e.padding,a=t.measuredH-t.mockupH-e.padding,s=parseInt(t.mockupW)+e.padding*2,n=parseInt(t.mockupH)+e.padding*2,p=l("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:`${r} ${a} ${s} ${n}`,style:"font-family: balsamiq"}),i=new T(p,e.fontFamily);return t.controls.control.sort((d,x)=>d.zOrder-x.zOrder).forEach(d=>{i.render(d,p)}),p}u.wireframeJSONToSVG=v,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
