import{S as m}from"./spinner.164b1eeb.js";import{h as i,p as l}from"./hooks.module.ee390651.js";import{a as h,T as d}from"./jwt.5024b243.js";import{o as t}from"./jsxRuntime.module.760e3403.js";import"./preact.module.e54f245b.js";const w="/_astro/error.985c5c63.svg";function y(){const[o,r]=i(!0),[a,n]=i(""),c=s=>{r(!0),fetch("https://api.roadmap.sh/v1-verify-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:s})}).then(e=>e.json()).then(e=>{if(!e.token)throw new Error("Something went wrong. Please try again..");h.set(d,e.token),window.location.href="/"}).catch(e=>{r(!1),n("Something went wrong. Please try again.")})};return l(()=>{const e=new URLSearchParams(window.location.search).get("code");if(!e){r(!1),n("Something went wrong. Please try again later.");return}c(e)},[]),t("div",{className:"mx-auto flex max-w-md flex-col items-center pt-0 sm:pt-12",children:t("div",{className:"mx-auto max-w-md text-center",children:[o&&t("img",{alt:"Please wait.",src:m,class:"mx-auto h-16 w-16 animate-spin"}),a&&t("img",{alt:"Please wait.",src:w,className:"mx-auto h-16 w-16"}),t("h2",{className:"mb-1 mt-4 text-center text-xl font-semibold sm:mb-3 sm:mt-4 sm:text-2xl",children:"Verifying your account"}),t("div",{className:"text-sm sm:text-base",children:[o&&t("p",{children:"Please wait while we verify your account.."}),a&&t("p",{class:"text-red-700",children:a})]})]})})}export{y as TriggerVerifyAccount};
