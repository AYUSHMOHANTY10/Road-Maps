import{h as n}from"./hooks.module.da6d90ff.js";import{S as f}from"./Spinner.a1a765f7.js";import{o as e}from"./jsxRuntime.module.760e3403.js";import"./preact.module.e54f245b.js";function S(){const[i,l]=n(""),[m,t]=n(!1),[a,o]=n();return e("form",{className:"mx-auto max-w-md",onSubmit:async s=>{s.preventDefault(),t(!0);const c=localStorage.getItem("forgot-password-send-at");if(c&&new Date().getTime()<Number(c))return t(!1),o({type:"error",message:"Please wait a few seconds before trying again."});const d=await fetch("http://localhost:8080/v1-forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i})}),u=await d.json();if(!d.ok)return t(!1),o({type:"error",message:u.message});t(!1),l(""),o({type:"success",message:"Check your email for a link to reset your password."});const r=new Date,g=r.getTime()+5*1e3;r.setTime(g),localStorage.setItem("forgot-password-send-at",r.getTime().toString())},children:[e("h2",{className:"text-3xl font-bold sm:text-center sm:text-4xl",children:"Forgot password?"}),e("p",{className:"mt-2 mb-6 sm:text-center",children:"Enter the email address associated with your account, and we'll email you a link to reset your password."}),e("label",{for:"email",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Email"}),e("input",{type:"email",name:"email",id:"email",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,placeholder:"john@example.com",value:i,onInput:s=>l(s.target.value)}),a&&e("div",{className:`mt-2 rounded-lg p-2 ${a.type==="error"?"bg-red-100 text-red-700":a.type==="success"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:a.message}),e("button",{type:"submit",disabled:m,className:"mt-2 inline-flex h-10 w-full items-center justify-center rounded-lg border border-slate-300 bg-black p-2 px-4 text-sm font-medium text-white outline-none transition duration-150 ease-in-out focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",children:m?e(f,{className:"text-white"}):"Continue"})]})}export{S as default};
