import{a}from"./js.cookie.cf83ad76.js";import{T as s}from"./constants.007bcfeb.js";import"./AccountDropdown.astro_astro_type_script_index_0_lang.07377b70.js";const r=document.querySelector("[data-email-to]"),n=document.querySelector("button[data-resend-button]"),t=document.querySelector("[data-message]"),d=a.get(s);let o="";window.addEventListener("load",()=>{if(o=new URLSearchParams(window.location.search).get("email"),!o||d)return window.location.replace("/");r?.textContent&&(n?.removeAttribute("disabled"),r.textContent=o)});n?.addEventListener("click",async()=>{n.setAttribute("disabled","true");try{const e=await fetch("http://localhost:8080/v1-send-verification-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})}),i=await e.json();if(console.log(e),!e.ok)throw new Error(i.message);(t?.innerHTML===""||t?.innerHTML)&&(t.innerHTML='<div class="mt-2 rounded-lg p-2 bg-green-100 text-green-800">Verification instructions have been sent to your email.</div>'),n.removeAttribute("disabled")}catch(e){console.error(e),(t?.innerHTML===""||t?.innerHTML)&&(t.innerHTML=`<div class="mt-2 rounded-lg p-2 bg-red-100 text-red-800">${e?.message}</div>`),n.removeAttribute("disabled")}});
