import{h as r,p as w}from"./hooks.module.ee390651.js";import{o as t}from"./jsxRuntime.module.760e3403.js";import{h}from"./http.9fcca5a9.js";import{a as b,T as P}from"./jwt.5024b243.js";import"./preact.module.e54f245b.js";function C(){const[c,f]=r(""),[n,m]=r(""),[a,p]=r(""),[l,s]=r(!1),[d,i]=r("");return w(()=>{const o=new URLSearchParams(window.location.search).get("code");o?f(o):window.location.href="/login"},[]),t("form",{className:"mx-auto w-full",onSubmit:async e=>{if(e.preventDefault(),s(!0),n!==a){s(!1),i("Passwords do not match.");return}const{response:o,error:u}=await h(`${{}.PUBLIC_API_URL}/v1-reset-forgotten-password`,{newPassword:n,confirmPassword:a,code:c});if(u?.message){s(!1),i(u.message);return}if(!o?.token){s(!1),i("Something went wrong. Please try again later.");return}const g=o.token;b.set(P,g),window.location.href="/"},children:[t("input",{type:"password",className:"mb-2 mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"New Password",value:n,onInput:e=>m(e.target.value)}),t("input",{type:"password",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"Confirm New Password",value:a,onInput:e=>p(e.target.value)}),d&&t("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:d}),t("button",{type:"submit",disabled:l,className:"mt-2 inline-flex w-full items-center justify-center rounded-lg bg-black p-2 py-3 text-sm font-medium text-white outline-none focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:bg-gray-400",children:l?"Please wait...":"Reset Password"})]})}export{C as default};
