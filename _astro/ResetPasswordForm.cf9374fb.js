import{h as o}from"./hooks.module.da6d90ff.js";import{S as f}from"./Spinner.a1a765f7.js";import{o as e}from"./jsxRuntime.module.760e3403.js";import"./preact.module.e54f245b.js";function N(){const[a,i]=o(""),[n,l]=o(""),[c,t]=o(!1),[r,d]=o();return e("form",{className:"mx-auto max-w-md",onSubmit:async s=>{if(s.preventDefault(),t(!0),a!==n)return t(!1),d({type:"error",message:"Passwords do not match."});const u=new URLSearchParams(window.location.search).get("code"),m=await fetch("http://localhost:8080/v1-reset-forgotten-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:a,confirmPassword:n,code:u})}),p=await m.json();if(!m.ok){t(!1),d({type:"error",message:p.message});return}t(!1),i(""),l(""),d({type:"success",message:"Your password has been reset."}),setTimeout(()=>{window.location.href="/login"},2e3)},children:[e("h2",{className:"mb-6 text-3xl font-bold sm:text-center sm:text-4xl",children:"Reset your password"}),e("label",{for:"new-password",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"New Password"}),e("input",{type:"password",name:"new-password",id:"new-password",className:"mt-2 mb-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"Enter a new password",value:a,onInput:s=>i(s.target.value)}),e("label",{for:"new-password-confirm",className:'text-sm leading-none text-slate-500 after:text-red-400 after:content-["*"]',children:"Confirm New Password"}),e("input",{type:"password",name:"new-password-confirm",id:"new-password-confirm",className:"mt-2 block w-full appearance-none rounded-lg border border-gray-300 px-3 py-2 shadow-sm outline-none transition duration-150 ease-in-out placeholder:text-gray-400 focus:ring-2 focus:ring-black focus:ring-offset-1",required:!0,minLength:6,placeholder:"Confirm your new password",value:n,onInput:s=>l(s.target.value)}),r&&e("div",{className:`mt-2 rounded-lg p-2 ${r.type==="error"?"bg-red-100 text-red-700":r.type==="success"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:r.message}),e("button",{disabled:c,type:"submit",className:"mt-5 inline-flex h-10 w-full items-center justify-center rounded-lg border border-slate-300 bg-black p-2 px-4 text-sm font-medium text-white outline-none transition duration-150 ease-in-out focus:ring-2 focus:ring-black focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-60",children:c?e(f,{className:"text-white"}):"Reset my password"})]})}export{N as default};
