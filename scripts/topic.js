(()=>{var o=class{constructor(){this.overlayId="topic-overlay",this.contentId="topic-content",this.loaderId="topic-loader",this.topicBodyId="topic-body",this.handleTopicClick=this.handleTopicClick.bind(this),this.close=this.close.bind(this),this.loading=this.loading.bind(this),this.populate=this.populate.bind(this),this.handleOverlayClick=this.handleOverlayClick.bind(this),this.init=this.init.bind(this)}get loaderEl(){return document.getElementById(this.loaderId)}get contentEl(){return document.getElementById(this.contentId)}get overlayEl(){return document.getElementById(this.overlayId)}loading(){this.loaderEl.classList.remove("hidden"),this.contentEl.replaceChildren(""),this.overlayEl.classList.remove("hidden")}close(){this.overlayEl.classList.add("hidden"),this.loaderEl.classList.remove("hidden"),this.contentEl.replaceChildren("")}populate(t){this.contentEl.replaceChildren(t),this.loaderEl.classList.add("hidden")}fetchTopicHtml(t,l){let e=l.replace(/^\d+-/,"").replaceAll(/:/g,"/"),i=`/${t}/${e}/`;return fetch(i).then(n=>n.text()).then(n=>new DOMParser().parseFromString(n,"text/html").getElementById("main-content"))}handleTopicClick(t){let{roadmapId:l,topicId:e}=t.detail;if(!e||!l){console.log("Missing topic or roadmap: ",t.detail);return}if(/^ext_link/.test(e)){window.open(`https://${e.replace("ext_link:","")}`);return}this.loading(),this.fetchTopicHtml(l,e).then(i=>{this.populate(i)}).catch(i=>{console.error(i),this.populate("Error loading the content!")})}handleOverlayClick(t){t.target.closest(`#${this.topicBodyId}`)||this.close()}init(){window.addEventListener("topic.click",this.handleTopicClick),window.addEventListener("click",this.handleOverlayClick),window.addEventListener("keydown",t=>{t.key.toLowerCase()==="escape"&&this.close()})}};})();
//# sourceMappingURL=topic.js.map
