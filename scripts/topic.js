(()=>{var n=class{constructor(t){this.config=t,this.close=this.close.bind(this),this.loading=this.loading.bind(this),this.populate=this.populate.bind(this)}get loaderEl(){return document.getElementById(this.config.loaderId)}get contentEl(){return document.getElementById(this.config.contentId)}get overlayEl(){return document.getElementById(this.config.overlayId)}loading(){return this.loaderEl.classList.remove("hidden"),this.contentEl.replaceChildren(""),this.overlayEl.classList.remove("hidden"),this}close(){return this.overlayEl.classList.add("hidden"),this.loaderEl.classList.remove("hidden"),this.contentEl.replaceChildren(""),this}populate(t){return this.contentEl.replaceChildren(t),this.loaderEl.classList.add("hidden"),this}};var r=class{constructor(t){this.config=t,this.topicOverlay=new n({contentId:this.config.topicContentId,loaderId:this.config.topicLoaderId,overlayId:this.config.topicOverlayId}),this.handleCloseTopic=this.handleCloseTopic.bind(this),this.handleLoadTopic=this.handleLoadTopic.bind(this),this.init=this.init.bind(this)}fetchTopicHtml(t,o){let e=o.replace(/^\d+-/,"").replaceAll(/:/g,"/"),i=`/${t}/${e}/`;return fetch(i).then(l=>l.text()).then(l=>new DOMParser().parseFromString(l,"text/html").getElementById("main-content"))}handleCloseTopic(t){t.target.closest(this.config.topicContentId)||(t.stopPropagation(),this.topicOverlay.close())}handleLoadTopic(t){let o=t.target.closest("g")||{},e=o.dataset?o.dataset.groupId:"";if(!!e){if(t.stopPropagation(),/^ext_link/.test(e)){window.open(`https://${e.replace("ext_link:","")}`);return}this.topicOverlay.loading(),this.fetchTopicHtml(this.config.roadmapId,e).then(i=>{this.topicOverlay.populate(i)}).catch(i=>{console.error(i),this.topicOverlay.populate("Error loading the content!")})}}init(){window.addEventListener("click",this.handleCloseTopic),window.addEventListener("click",this.handleLoadTopic)}};window.initTopic=function(s){new r(s).init()};})();
//# sourceMappingURL=topic.js.map
