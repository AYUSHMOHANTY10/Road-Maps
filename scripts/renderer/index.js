(()=>{function R(d){return(d||"").replace(/^\d+-/,"")}function S(d){let t=d>>16&255,e=d>>8&255,r=d&255;return`rgb(${t},${e},${r})`}function p(d,t={},e){let r=document.createElementNS("http://www.w3.org/2000/svg",d);for(let o in t)!t.hasOwnProperty(o)||r.setAttribute(o,t[o]);return e&&e.appendChild(r),r}var m=2.7,O=4,z=2,k={black:["#000"],gray:["#000","#333","#666","#999","#ccc","#ddd","#eee"],white:["#fff"],red:["#cf2a27","#ea9999","#eo6666","#cc0000","#990000","#660000"],orange:["#ff9900","#f9cb9c","#f6b26b","#e69138","#b45f06","#783f04"],yellow:["#ffff00","#ffe599","#ffd966","#f1c232","#bf9000","#7f6000"],green:["#009e0f","#b6d7a8","#93c47d","#6aa84f","#38761d","#274e13"],cyan:["#00ffff","#a2c4c9","#76a5af","#45818e","#134f5c","#0c343d"],blue:["#2b78e4","#9fc5f8","#6fa8dc","#597eaa","#085394","#073763"],purple:["#9900ff","#b4a7d6","#8e7cc3","#674ea7","#351c75","#20124d"],pink:["#ff00ff","#d5a6bd","#c27ba0","#a64d79","#741b47","#4c1130"]},w=class{constructor(t,e){this.svgRoot=t,this.fontFamily=e,this.canvasRenderingContext2D=document.createElement("canvas").getContext("2d")}render(t,e){let r=t.typeID;r in this?this[r](t,e):console.log(`'${r}' control type not implemented`)}parseColor(t,e){return t===void 0?`rgb(${e})`:S(t)}parseFontProperties(t){var e,r,o;return{style:(e=t.properties)!=null&&e.italic?"italic":"normal",weight:(r=t.properties)!=null&&r.bold?"bold":"normal",size:(o=t.properties)!=null&&o.size?t.properties.size+"px":"13px",family:this.fontFamily}}measureText(t,e){return this.canvasRenderingContext2D.font=e,this.canvasRenderingContext2D.measureText(t)}drawRectangle(t,e){var r,o,i,s,l,n;p("rect",{x:parseInt(t.x)+m/2,y:parseInt(t.y)+m/2,width:parseInt((r=t.w)!=null?r:t.measuredW)-m,height:parseInt((o=t.h)!=null?o:t.measuredH)-m,rx:z,fill:this.parseColor((i=t.properties)==null?void 0:i.color,"255,255,255"),"fill-opacity":(l=(s=t.properties)==null?void 0:s.backgroundAlpha)!=null?l:1,stroke:this.parseColor((n=t.properties)==null?void 0:n.borderColor,"0,0,0"),"stroke-width":m},e)}addText(t,e,r,o){var i,s;let l=(i=t.properties.text)!=null?i:"",n=parseInt(t.x),a=parseInt(t.y),c=this.parseFontProperties(t),u=this.measureText(l,`${c.style} ${c.weight} ${c.size} ${c.family}`),h=o==="center"?n+((s=t.w)!=null?s:t.measuredW)/2-u.width/2:n,C=a+t.measuredH/2+u.actualBoundingBoxAscent/2,g=p("text",{x:h,y:C,fill:r,"font-style":c.style,"font-weight":c.weight,"font-size":c.size},e);if(!l.includes("{color:")){let x=p("tspan",{},g);x.textContent=l;return}l.split(/{color:|{color}/).forEach(x=>{if(x.includes("}")){let[f,T]=x.split("}");if(!f.startsWith("#")){let v=parseInt(f.slice(-1));f=isNaN(v)?k[f][0]:k[f][v]}let L=p("tspan",{fill:f},g);L.textContent=T}else{let f=p("tspan",{},g);f.textContent=x}})}TextArea(t,e){this.drawRectangle(t,e)}Canvas(t,e){this.drawRectangle(t,e)}Label(t,e){var r;this.addText(t,e,this.parseColor((r=t.properties)==null?void 0:r.color,"0,0,0"),"left")}TextInput(t,e){var r;this.drawRectangle(t,e),this.addText(t,e,this.parseColor((r=t.properties)==null?void 0:r.textColor,"0,0,0"),"center")}Arrow(t,e){var r,o,i;let s=parseInt(t.x),l=parseInt(t.y),{p0:n,p1:a,p2:c}=t.properties,u;((r=t.properties)==null?void 0:r.stroke)==="dotted"?u="0.8 12":((o=t.properties)==null?void 0:o.stroke)==="dashed"&&(u="28 46");let h={x:(c.x-n.x)*a.x,y:(c.y-n.y)*a.x};p("path",{d:`M${s+n.x} ${l+n.y}Q${s+n.x+h.x+h.y*a.y*3.6} ${l+n.y+h.y+-h.x*a.y*3.6} ${s+c.x} ${l+c.y}`,fill:"none",stroke:this.parseColor((i=t.properties)==null?void 0:i.color,"0,0,0"),"stroke-width":O,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":u},e)}Icon(t,e){var r;let o=parseInt(t.x),i=parseInt(t.y),s=10;p("circle",{cx:o+s,cy:i+s,r:s,fill:this.parseColor((r=t.properties)==null?void 0:r.color,"0,0,0")},e),t.properties.icon.ID==="check-circle"&&p("path",{d:`M${o+4.5} ${i+s}L${o+8.5} ${i+s+4} ${o+15} ${i+s-2.5}`,fill:"none",stroke:"#fff","stroke-width":3.5,"stroke-linecap":"round","stroke-linejoin":"round"},e)}HRule(t,e){var r,o,i,s;let l=parseInt(t.x),n=parseInt(t.y),a;((r=t.properties)==null?void 0:r.stroke)==="dotted"?a="0.8, 8":((o=t.properties)==null?void 0:o.stroke)==="dashed"&&(a="18, 30"),p("path",{d:`M${l} ${n}L${l+parseInt((i=t.w)!=null?i:t.measuredW)} ${n}`,fill:"none",stroke:this.parseColor((s=t.properties)==null?void 0:s.color,"0,0,0"),"stroke-width":m,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":a},e)}__group__(t,e){var r;let o=(r=t?.properties)==null?void 0:r.controlName,i=R(o),s=localStorage.getItem(i)==="done",l=p("g",{...o?{class:`clickable-group ${s?"done":""}`,"data-group-id":o}:{}},e);t.children.controls.control.sort((n,a)=>n.zOrder-a.zOrder).forEach(n=>{n.x=parseInt(n.x,10)+parseInt(t.x,10),n.y=parseInt(n.y,10)+parseInt(t.y,10),this.render(n,l)})}};async function I(d,t={}){if(t={padding:5,fontFamily:"balsamiq",fontURL:"https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2",...t},t.fontURL){let a=new FontFace(t.fontFamily,`url(${t.fontURL})`);await a.load(),document.fonts.add&&document.fonts.add(a)}let e=d.mockup,r=e.measuredW-e.mockupW-t.padding,o=e.measuredH-e.mockupH-t.padding,i=parseInt(e.mockupW)+t.padding*2,s=parseInt(e.mockupH)+t.padding*2,l=p("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:`${r} ${o} ${i} ${s}`,style:"font-family: balsamiq"}),n=new w(l,t.fontFamily);return e.controls.control.sort((a,c)=>a.zOrder-c.zOrder).forEach(a=>{n.render(a,l)}),l}function $(d){if(!d){console.error("jsonUrl not defined in frontmatter");return}return fetch(d).then(function(t){return t.json()}).then(function(t){return I(t)})}function b(d,t){let e=t.replace(/^\d+-/,"").replaceAll(/:/g,"/"),r=`/${d}/${e}/`;return fetch(r).then(o=>o.text()).then(o=>new DOMParser().parseFromString(o,"text/html").querySelector("#topic-content"))}var y=class{constructor(t){this.settings=t,this.onDOMLoaded=this.onDOMLoaded.bind(this),this.bindUI=this.bindUI.bind(this),this.handleCloseTopic=this.handleCloseTopic.bind(this)}onDOMLoaded(){$(this.settings.jsonUrl).then(t=>{document.getElementById(this.settings.roadmapContainerId).replaceChildren(t)}).catch(console.error)}handleCloseTopic(t){t.target.closest("#topic-content-content")||document.querySelector("#topic-content-overlay").classList.add("hidden")}handleLoadTopic(t){let e=t.target.closest("g")||{},r=e.dataset?e.dataset.groupId:"";if(!!r){if(/^ext_link/.test(r)){window.open(`https://${r.replace("ext_link:","")}`);return}document.querySelector("#topic-content-overlay").classList.remove("hidden"),b(this.settings.roadmapId,r).then(o=>{document.querySelector("#topic-content-content").replaceChildren(o)}).catch(console.error)}}onClick(t){this.handleLoadTopic(t),this.handleCloseTopic(t)}bindUI(){window.addEventListener("DOMContentLoaded",this.onDOMLoaded),window.addEventListener("click",this.onClick)}};window.renderRoadmap=function(d){new y(d).bindUI()};})();
//# sourceMappingURL=index.js.map
